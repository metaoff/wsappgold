<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Messenger</title>

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background: #0b141a;
  color: white;
}

/* HEADER */
header {
  background: #202c33;
  padding: 14px;
  font-weight: 600;
  text-align: center;
}

/* CHAT LIST */
#chatList, #chatView {
  display: none;
}

.active {
  display: block;
}

.chat {
  display: flex;
  align-items: center;
  padding: 14px;
  border-bottom: 1px solid #222;
  cursor: pointer;
}

.avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #555;
  margin-right: 12px;
}

.chat-info {
  flex: 1;
}

.chat-name {
  font-weight: 600;
}

.chat-msg {
  font-size: 13px;
  opacity: 0.6;
}

/* CHAT VIEW */
#messages {
  padding: 16px;
  height: calc(100vh - 120px);
  overflow-y: auto;
}

.msg {
  max-width: 75%;
  padding: 10px 14px;
  margin-bottom: 10px;
  border-radius: 10px;
  font-size: 14px;
}

.me {
  background: #005c4b;
  margin-left: auto;
}

.m {
  background: #202c33;
}

/* INPUT */
#inputBar {
  display: flex;
  padding: 10px;
  background: #202c33;
}

input {
  flex: 1;
  border: none;
  border-radius: 20px;
  padding: 10px 14px;
  background: #2a3942;
  color: white;
}

button {
  background: none;
  border: none;
  color: #00a884;
  font-size: 18px;
  margin-left: 10px;
}

/* POPUP */
#popup {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: none;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: red;
  font-size: 18px;
}
</style>
</head>

<body>

<header id="title">Chats</header>

<!-- LISTE DES CHATS -->
<div id="chatList" class="active">
  <div class="chat" onclick="openChat('M')">
    <div class="avatar"></div>
    <div class="chat-info">
      <div class="chat-name">M</div>
      <div class="chat-msg">Connexion établie</div>
    </div>
  </div>

  <div class="chat" onclick="crash()">
    <div class="avatar"></div>
    <div class="chat-info">
      <div class="chat-name">Julie</div>
      <div class="chat-msg">Photo reçue</div>
    </div>
  </div>

  <div class="chat" onclick="crash()">
    <div class="avatar"></div>
    <div class="chat-info">
      <div class="chat-name">Papa</div>
      <div class="chat-msg">Ok</div>
    </div>
  </div>
</div>

<!-- VUE CHAT -->
<div id="chatView">
  <header onclick="back()">← M</header>

  <div id="messages">
    <div class="msg m">Synchronisation terminée.</div>
  </div>

  <div id="inputBar">
    <input id="input" placeholder="Message…" />
    <button onclick="send()">➤</button>
  </div>
</div>

<!-- POPUP -->
<div id="popup">
  <div>
    ⚠️ Oups !<br><br>
    Crash système.
  </div>
</div>

<script>
const starts = [
  "Le protocole",
  "La couche réseau",
  "L’accès sécurisé",
  "La session Gold",
  "Le flux chiffré"
];

const mids = [
  "ignore totalement",
  "n’est plus compatible avec",
  "a perdu le lien vers",
  "refuse de reconnaître",
  "désynchronise"
];

const ends = [
  "ton message.",
  "la logique humaine.",
  "le serveur principal.",
  "le temps réel.",
  "cette conversation."
];

function randomReply() {
  return starts[Math.floor(Math.random()*5)] + " "
       + mids[Math.floor(Math.random()*5)] + " "
       + ends[Math.floor(Math.random()*5)];
}

function openChat() {
  document.getElementById("chatList").classList.remove("active");
  document.getElementById("chatView").classList.add("active");
  document.getElementById("title").textContent = "M";
}

function back() {
  document.getElementById("chatView").classList.remove("active");
  document.getElementById("chatList").classList.add("active");
  document.getElementById("title").textContent = "Chats";
}

function send() {
  const input = document.getElementById("input");
  if (!input.value) return;

  addMsg(input.value, "me");
  input.value = "";

  setTimeout(() => {
    addMsg(randomReply(), "m");
  }, 600);
}

function addMsg(text, cls) {
  const d = document.createElement("div");
  d.className = "msg " + cls;
  d.textContent = text;
  document.getElementById("messages").appendChild(d);
  document.getElementById("messages").scrollTop = 9999;
}

function crash() {
  const p = document.getElementById("popup");
  p.style.display = "flex";
  setTimeout(() => p.style.display = "none", 1200);
}
</script>

<!-- Interface parodique, fictive -->
</body>
</html>
